$(document).on "nested:fieldAdded", (event) ->
  total_cases = $(".case_number").size()
  case_num = event.field.find('.case_number')
  case_num.text(total_cases)

jQuery ->
  $(".data_table").dataTable
    "bJQueryUI": true
    "sPaginationType": "full_numbers"
    "bDestroy": true
    "oLanguage":
      <% if  "#{t :locale}" == "en" %>
        "sUrl":     "/assets/dataTables.english.txt"
      <% else %>
        "sUrl":     "/assets/dataTables.spanish.txt"
      <% end %>
  $('.data_table').css('width', '')

  setTimeout ->
          hideFlashMessages()
      ,2500

      hideFlashMessages = ->
          $("div.alert-box").slideUp()
